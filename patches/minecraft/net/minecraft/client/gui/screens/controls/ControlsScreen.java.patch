--- a/net/minecraft/client/gui/screens/controls/ControlsScreen.java
+++ b/net/minecraft/client/gui/screens/controls/ControlsScreen.java
@@ -27,20 +_,20 @@
    }
 
    protected void m_7856_() {
-      this.m_7082_(new Button(this.f_96543_ / 2 - 155, 18, 150, 20, new TranslatableComponent("options.mouse_settings"), (p_97540_) -> {
+      this.m_7082_(new Button(this.f_96543_ / 2 - 155, 18, 150, 20, new TranslatableComponent("options.mouse_settings"), (p_213126_1_) -> {
          this.f_96541_.m_91152_(new MouseSettingsScreen(this, this.f_96282_));
       }));
       this.m_7082_(Option.f_91631_.m_7496_(this.f_96282_, this.f_96543_ / 2 - 155 + 160, 18, 150));
       this.f_97516_ = new ControlList(this, this.f_96541_);
       this.f_96540_.add(this.f_97516_);
-      this.f_97517_ = this.m_7082_(new Button(this.f_96543_ / 2 - 155, this.f_96544_ - 29, 150, 20, new TranslatableComponent("controls.resetAll"), (p_97538_) -> {
+      this.f_97517_ = this.m_7082_(new Button(this.f_96543_ / 2 - 155, this.f_96544_ - 29, 150, 20, new TranslatableComponent("controls.resetAll"), (p_213125_1_) -> {
          for(KeyMapping keymapping : this.f_96282_.f_92059_) {
-            keymapping.m_90848_(keymapping.m_90861_());
+            keymapping.setToDefault();
          }
 
          KeyMapping.m_90854_();
       }));
-      this.m_7082_(new Button(this.f_96543_ / 2 - 155 + 160, this.f_96544_ - 29, 150, 20, CommonComponents.f_130655_, (p_97535_) -> {
+      this.m_7082_(new Button(this.f_96543_ / 2 - 155 + 160, this.f_96544_ - 29, 150, 20, CommonComponents.f_130655_, (p_213124_1_) -> {
          this.f_96541_.m_91152_(this.f_96281_);
       }));
    }
@@ -59,11 +_,14 @@
    public boolean m_7933_(int p_97526_, int p_97527_, int p_97528_) {
       if (this.f_97514_ != null) {
          if (p_97526_ == 256) {
+            this.f_97514_.setKeyModifierAndCode(net.minecraftforge.client.settings.KeyModifier.getActiveModifier(), InputConstants.f_84822_);
             this.f_96282_.m_92159_(this.f_97514_, InputConstants.f_84822_);
          } else {
+            this.f_97514_.setKeyModifierAndCode(net.minecraftforge.client.settings.KeyModifier.getActiveModifier(), InputConstants.m_84827_(p_97526_, p_97527_));
             this.f_96282_.m_92159_(this.f_97514_, InputConstants.m_84827_(p_97526_, p_97527_));
          }
 
+         if (!net.minecraftforge.client.settings.KeyModifier.isKeyCodeModifier(this.f_97514_.getKey()))
          this.f_97514_ = null;
          this.f_97515_ = Util.m_137550_();
          KeyMapping.m_90854_();
