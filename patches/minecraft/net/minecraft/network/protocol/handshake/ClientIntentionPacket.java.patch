--- a/net/minecraft/network/protocol/handshake/ClientIntentionPacket.java
+++ b/net/minecraft/network/protocol/handshake/ClientIntentionPacket.java
@@ -13,6 +_,7 @@
    private String f_134721_;
    private int f_134722_;
    private ConnectionProtocol f_134723_;
+   private String fmlVersion = net.minecraftforge.fml.network.FMLNetworkConstants.NETVERSION;
 
    public ClientIntentionPacket() {
    }
@@ -30,11 +_,13 @@
       this.f_134721_ = p_134730_.m_130136_(255);
       this.f_134722_ = p_134730_.readUnsignedShort();
       this.f_134723_ = ConnectionProtocol.m_129583_(p_134730_.m_130242_());
+      this.fmlVersion = net.minecraftforge.fml.network.NetworkHooks.getFMLVersion(this.f_134721_);
+      this.f_134721_ = this.f_134721_.split("\0")[0];
    }
 
    public void m_5779_(FriendlyByteBuf p_134737_) throws IOException {
       p_134737_.m_130130_(this.f_134720_);
-      p_134737_.m_130070_(this.f_134721_);
+      p_134737_.m_130070_(this.f_134721_ + "\0"+net.minecraftforge.fml.network.FMLNetworkConstants.NETVERSION+"\0");
       p_134737_.writeShort(this.f_134722_);
       p_134737_.m_130130_(this.f_134723_.m_129582_());
    }
@@ -49,5 +_,9 @@
 
    public int m_134738_() {
       return this.f_134720_;
+   }
+
+   public String getFMLVersion() {
+      return this.fmlVersion;
    }
 }
